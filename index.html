<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Task Reminder</title>
    <link rel="stylesheet" href="css/styles.css">
    <meta name="theme-color" content="#3b82f6">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="app-shell">
        <header class="app-header">
            <h1>Daily Reminders</h1>
            <div class="header-actions">
                <button id="btn-settings" aria-label="Settings">⚙️</button>
            </div>
        </header>

        <main class="task-container">
            <div id="permission-banner" class="banner hidden">
                <p>Enable notifications and voice alerts to get reminders.</p>
                <button id="btn-enable-permissions">Enable</button>
            </div>

            <div class="toolbar">
                <div class="filters">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="pending">Pending</button>
                    <button class="filter-btn" data-filter="completed">Done</button>
                </div>
                <button id="btn-add-task" class="primary-btn">+ New Task</button>
            </div>

            <ul id="task-list" class="task-list">
                <!-- Tasks will be injected here -->
                <li class="empty-state">Loading tasks...</li>
            </ul>
        </main>

        <!-- Add/Edit Task Modal -->
        <dialog id="task-modal" class="modal">
            <form id="task-form" method="dialog">
                <h2>New Task</h2>
                <input type="hidden" id="task-id">
                
                <div class="form-group">
                    <label for="task-title">Title</label>
                    <input type="text" id="task-title" required placeholder="e.g. Drink Water">
                </div>

                <div class="form-group">
                    <label for="task-time">Time</label>
                    <input type="time" id="task-time" required>
                </div>

                <div class="form-group">
                    <label for="task-priority">Priority</label>
                    <select id="task-priority">
                        <option value="normal">Normal</option>
                        <option value="high">High (Escalates)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="task-interval">Remind Interval (minutes)</label>
                    <input type="number" id="task-interval" value="5" min="1" required>
                </div>

                <div class="form-group">
                    <label>Recurrence</label>
                    <div class="radio-group">
                        <label><input type="radio" name="recurrence" value="daily" checked> Daily</label>
                        <label><input type="radio" name="recurrence" value="weekdays"> Weekdays</label>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" id="btn-cancel-task">Cancel</button>
                    <button type="submit" class="primary-btn">Save</button>
                </div>
            </form>
        </dialog>

        <!-- Settings Modal -->
        <dialog id="settings-modal" class="modal">
            <form method="dialog">
                <h2>Settings</h2>
                <div class="form-group">
                    <label for="setting-voice">Voice</label>
                    <select id="setting-voice"></select>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="setting-escalation" checked> 
                        Enable Angry Escalation
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="submit">Close</button>
                </div>
            </form>
        </dialog>
    </div>

    <script type="module" src="js/app.js"></script>
    <!--
        Replace the placeholder below with your VAPID public key for Push subscriptions.
        Example (do not commit secrets):
        <script>window.VAPID_PUBLIC_KEY = 'BP...'</script>
    -->
    <script>
        // Placeholder: set your VAPID public key here for development/testing
        window.VAPID_PUBLIC_KEY = '';
    </script>
</body>
</html>